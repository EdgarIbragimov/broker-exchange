# Инструменты для работы с биржевыми данными

В данной директории находятся вспомогательные скрипты для работы с биржевыми данными.

## NASDAQ Data Fetcher

Скрипт `nasdaq-data-fetcher.js` предназначен для **одноразовой** загрузки реальных исторических данных котировок акций с биржи за последние 3 года. Это **не** скрипт для обновления данных в реальном времени.

### Функциональность

- Загружает исторические данные для 8 акций (AAPL, SBUX, MSFT, CSCO, QCOM, AMZN, TSLA, AMD)
- Получает данные за последние 3 года одним запросом
- Сохраняет результат в формате JSON в файл `storage/stocks.json`
- Форматирует данные в формате, подходящем для использования в приложении

### Когда использовать

Скрипт следует запускать **один раз** при настройке проекта или когда требуется обновить исторические данные. Это не сервис, работающий в фоне — его нужно запускать вручную.

### Зависимости

Для работы скрипта необходимы следующие NPM-пакеты:

- axios: для выполнения HTTP-запросов
- fs и path: для работы с файловой системой (встроены в Node.js)

### Установка зависимостей

```bash
npm install axios
```

### Запуск скрипта

```bash
cd broker-exchange/backend
node src/tools/nasdaq-data-fetcher.js
```

### API

Скрипт использует бесплатный Yahoo Finance API для получения исторических данных акций.
Не требуется ключ API или регистрация.

### Формат данных

Данные сохраняются в следующем формате:

```json
{
  "AAPL": {
    "symbol": "AAPL",
    "companyName": "Apple, Inc.",
    "isActive": true,
    "historicalData": [
      {
        "date": "4/6/2021",
        "open": "$123.45"
      }
      // ...
    ],
    "currentPrice": "$123.45"
  }
  // Другие акции...
}
```

### Примечания

- Скрипт делает паузу между запросами, чтобы не перегружать API Yahoo Finance
- В случае ошибки при получении данных для конкретной акции, скрипт пропустит ее и продолжит загрузку других акций
- Текущая цена акции определяется как последняя цена из исторических данных
- После запуска скрипта и успешного сохранения данных, приложение автоматически будет использовать новые исторические данные
